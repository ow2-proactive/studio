<div class="modal-dialog" style="width:60vw">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close file-browser-close" aria-hidden="true">Ã—</button>
            <h3><%=locationDescription%> File Browser</h3>
            <h5>Browse, Upload files in <%=locationDescription%>, Select one file as the variable value</h5>
        </div>
        <div id="files-body" class="modal-body">
            <div>
                <a id="refresh-file-btn" href="javascript:void(0)" class="pointer pa-tool-btn" title="Refresh files" style="padding-left: 0px;">
                    <i class="fas fa-redo"></i>
                </a>
                <a id="new-folder-btn" href="javascript:void(0)" class="pointer pa-tool-btn" title="New folder">
                    <i class="fas fa-folder-plus"></i>
                </a>
                <a id="upload-file-btn" href="javascript:void(0)" class="pointer pa-tool-btn" title="Upload a file into the <%=locationDescription%>">
                    <i class="fas fa-upload"></i>
                </a>
                <a id="delete-file-btn" href="javascript:void(0)" class="pointer pa-tool-btn" title="Delete the selected file or folder">
                    <i class="fas fa-trash"></i>
                </a>
            </div>
            <br>
            <div id="current-path" style="display:inline-flex">
                <span class="font-bold">
                    Location:
                </span>
                <span class="current-sub-path"><a href="javascript:void(0)" value="">/</a></span>
                <ol class="breadcrumb" style="border:none;">
                    <% var splitPath = currentPath.split("/").filter(i => i);
                    for (var [index, subPath] of splitPath.entries()) { %>
                    <li class="breadcrumb-item current-sub-path" ><a href="javascript:void(0)" value="<%- splitPath.slice(0, index+1).join('/')%>/"><%- (subPath.length > 100) ? subPath.substring(0, 100) + " ..." : subPath %></a></li>
                    <% } %>
                </ol>
            </div>
            <br>
            <div id="files-container" style="overflow-x: hidden; overflow-y: scroll; height: 40vh; overflow-wrap: break-word;">
               <table style="width: 100%; table-layout:fixed;">
                   <thead>
                        <th width="35%">Name</th>
                        <th width="15%">Size</th>
                        <th width="20%">Type</th>
                        <th width="30%">Modified</th>
                   </thead>
                   <tbody id="files-tbody">
                    <% for (var index in directories) { %>
                    <tr>
                        <td class="file-browser-dir" value="<%- currentPath %><%- directories[index].name %>/"> <i class="far fa-folder"> </i> <%- directories[index].name %> </td>
                        <td> </td>
                        <td> Folder </td>
                        <td> <%- directories[index].modified %> </td>
                    </tr>
                    <% } %>
                    <% for (var index in files) { %>
                    <tr>
                        <td class="file-browser-file" value="<%- currentPath %><%- files[index].name %>"> <i class="far fa-file"> </i> <%- files[index].name %> </td>
                        <td> <%- files[index].size %> </td>
                        <td> <%- files[index].type %> </td>
                        <td> <%- files[index].modified %> </td>
                    </tr>
                    <% } %>
                   </tbody>
               </table>
            </div>
            <br>
            <label id="file-browser-error-message" style="color:red;"></label>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary file-browser-select-btn" type="button"> Select </button>
            <input type="file" id="selected-upload-file" class="hidden"/>
            <button class="btn btn-white file-browser-close" type="button"> Cancel </button>
        </div>
    </div>
</div>
